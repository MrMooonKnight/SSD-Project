{% extends "base.html" %}

{% block title %}Chat Room{% endblock %}

{% block content %}
<div id="usernameModal" class="modal" style="display: none;">
    <div class="modal-content">
        <h2>Set Your Username</h2>
        <div class="form-group">
            <label for="usernameInput">Username:</label>
            <input type="text" id="usernameInput" placeholder="Enter your username" maxlength="100" />
        </div>
        <div class="form-group">
            <button id="generateUsernameBtn" class="btn btn-secondary">Generate Random</button>
        </div>
        <button id="setUsernameBtn" class="btn btn-primary btn-block">Continue to Chat</button>
        <div id="usernameError" class="error-message"></div>
    </div>
</div>

<div id="chatContainer" class="chat-container" style="display: none;">
    <div class="chat-sidebar">
        <div class="sidebar-header">
            <h1 class="sidebar-brand">VibeChat</h1>
        </div>
        <div class="sidebar-content">
            <div class="users-section">
                <div class="users-section-title">Active Users</div>
                <div id="activeUsersList" class="users-list"></div>
            </div>
            <div class="users-section">
                <div class="users-section-title">Past Users</div>
                <div id="pastUsersList" class="users-list"></div>
            </div>
        </div>
    </div>
    
    <div class="chat-main">
        <div class="chat-header-bar">
            <div class="room-info">
                <h2>Room: <span id="roomName"></span></h2>
                <span id="currentUsername"></span>
            </div>
            <div class="chat-actions">
                <button id="clearChatBtn" class="btn btn-small">Clear All Messages</button>
                <button id="leaveRoomBtn" class="btn btn-small">Leave Room</button>
            </div>
        </div>
        
        <div id="messagesContainer" class="messages-container"></div>
        
        <div class="message-input-wrapper">
            <div class="message-input-container">
                <input type="text" id="messageInput" placeholder="Type a message..." maxlength="10000" />
                <button id="sendBtn" class="btn btn-primary btn-send">Send</button>
            </div>
        </div>
    </div>
</div>

<script src="{{ url_for('static', filename='js/chat.js') }}"></script>
{% endblock %}
